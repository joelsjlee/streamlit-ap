{"code":"(this.webpackJsonpstreamlit_folium=this.webpackJsonpstreamlit_folium||[]).push([[0],{6:function(e,t,n){\"use strict\";n.r(t);var a=n(3),l=n(5),_=null;a.a.events.addEventListener(a.a.RENDER_EVENT,(function(e){var t=e.detail,n=t.args.fig,i=t.args.height,c=t.args.width,d=Object(l.a)(o,250);function o(){var e=__GLOBAL_DATA__,t=e.map,n=t.getBounds(),l=t.getZoom();a.a.setComponentValue({last_clicked:e.lat_lng_clicked,last_object_clicked:e.last_object_clicked,all_drawings:e.all_drawings,last_active_drawing:e.last_active_drawing,bounds:n,zoom:l})}function r(e){return s(e)}function s(e){__GLOBAL_DATA__.last_object_clicked=e.latlng,d()}if(null==_)try{_=__GLOBAL_DATA__.map}catch(A){var m=document.getElementById(\"map_div\"),u=document.getElementById(\"map_div2\");if(u&&(u.style.height=\"\".concat(i,\"px\"),u.style.width=\"\".concat(c,\"px\")),m){if(m.style.height=\"\".concat(i,\"px\"),m.style.width=\"\".concat(c,\"px\"),-1!==n.indexOf(\"document.getElementById('export')\")){var p=document.createElement(\"a\");p.href=\"#\",p.id=\"export\",p.innerHTML=\"Export\",document.body.appendChild(p)}var g=document.createElement(\"script\"),h=n+\"\\n          window.__GLOBAL_DATA__ = {\\n            map: map_div,\\n            bounds: map_div.getBounds(),\\n            lat_lng_clicked: null,\\n            last_object_clicked: null,\\n            all_drawings: null,\\n            last_active_drawing: null,\\n            zoom: null,\\n            drawnItems: drawnItems,\\n        };\";g.innerHTML=h,document.body.appendChild(g);var v=__GLOBAL_DATA__.map;for(var w in v.on(\"click\",(function(e){__GLOBAL_DATA__.lat_lng_clicked=e.latlng,d()})),v.on(\"moveend\",(function(e){d()})),v._layers){v._layers[w].on(\"click\",s)}v.on(\"draw:created\",r),v.on(\"draw:edited\",r),v.on(\"draw:deleted\",r),a.a.setFrameHeight(),o()}}})),a.a.setComponentReady(),a.a.setFrameHeight()}},[[6,1,2]]]);","name":"static/js/main.62768cb3.chunk.js","map":{"version":3,"sources":["static/js/main.62768cb3.chunk.js"],"names":["this","push","module","__webpack_exports__","__webpack_require__","r","streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__","underscore__WEBPACK_IMPORTED_MODULE_1__","map","events","addEventListener","RENDER_EVENT","event","data","detail","fig","args","height","width","debouncedUpdateComponentValue","Object","updateComponentValue","global_data","__GLOBAL_DATA__","bounds","getBounds","zoom","getZoom","setComponentValue","last_clicked","lat_lng_clicked","last_object_clicked","all_drawings","last_active_drawing","onDraw","e","onLayerClick","latlng","map_div","document","getElementById","map_div2","style","concat","indexOf","a","createElement","href","id","innerHTML","body","appendChild","render_script","replaced","_map","key","on","_layers","setFrameHeight","setComponentReady"],"mappings":"CAACA,KAAmC,6BAAIA,KAAmC,8BAAK,IAAIC,KAAK,CAAC,CAAC,GAAG,CAExF,EACA,SAAUC,EAAQC,EAAqBC,GAE7C,aACAA,EAAoBC,EAAEF,GACD,IAAIG,EAAuDF,EAAoB,GAC3EG,EAA0CH,EAAoB,GACnFI,EAAI,KAiBRF,EAAwE,EAAEG,OAAOC,iBAAiBJ,EAAwE,EAAEK,cAbzK,SAAkBC,GACrB,IAAIC,EAAKD,EAAME,OACXC,EAAIF,EAAKG,KAAU,IAAMC,EAAOJ,EAAKG,KAAa,OAAME,EAAML,EAAKG,KAAY,MAAmIG,EAA8BC,OAAOb,EAA0D,EAAjEa,CAAoEC,EAAqB,KAAK,SAASA,IAAuB,IAAIC,EAAYC,gBAAoBf,EAAIc,EAAYd,IAAQgB,EAAOhB,EAAIiB,YAAgBC,EAAKlB,EAAImB,UAAUrB,EAAwE,EAAEsB,kBAAkB,CAACC,aAAaP,EAAYQ,gBAAgBC,oBAAoBT,EAAYS,oBAAoBC,aAAaV,EAAYU,aAAaC,oBAAoBX,EAAYW,oBAAoBT,OAAOA,EAAOE,KAAKA,IAA+D,SAASQ,EAAOC,GAAG,OAAOC,EAAaD,GAAI,SAASC,EAAaD,GAAmBZ,gBAA4BQ,oBAAoBI,EAAEE,OAKx8BlB,IAAiC,GAAQ,MAALX,EAAW,IAAIA,EAAIe,gBAAgBf,IAAK,MAAM2B,GAElF,IAAIG,EAAQC,SAASC,eAAe,WAAeC,EAASF,SAASC,eAAe,YAAkH,GAAnGC,IAAUA,EAASC,MAAMzB,OAAO,GAAG0B,OAAO1B,EAAO,MAAMwB,EAASC,MAAMxB,MAAM,GAAGyB,OAAOzB,EAAM,OAAUoB,EAAQ,CAAuF,GAAtFA,EAAQI,MAAMzB,OAAO,GAAG0B,OAAO1B,EAAO,MAAMqB,EAAQI,MAAMxB,MAAM,GAAGyB,OAAOzB,EAAM,OAA6D,IAApDH,EAAI6B,QAAQ,qCAA0C,CAAC,IAAIC,EAAEN,SAASO,cAAc,KAAKD,EAAEE,KAAK,IAAIF,EAAEG,GAAG,SAASH,EAAEI,UAAU,SAASV,SAASW,KAAKC,YAAYN,GAAI,IAAIO,EAAcb,SAASO,cAAc,UAGpJO,EAAStC,EAA1V,6UAA8WqC,EAAcH,UAAUI,EAASd,SAASW,KAAKC,YAAYC,GAAe,IAAoCE,EAApB/B,gBAAqCf,IAA6D,IAAI,IAAI+C,KAAjED,EAAKE,GAAG,SAVxb,SAAoBrB,GAAmBZ,gBAA4BO,gBAAgBK,EAAEE,OAAOlB,OAUgXmC,EAAKE,GAAG,WAVkO,SAAmBrB,GAAGhB,OAUpNmC,EAAKG,QAAQ,CAAWH,EAAKG,QAAQF,GAAWC,GAAG,QAAQpB,GAAekB,EAAKE,GAAG,eAAetB,GAAQoB,EAAKE,GAAG,cAActB,GAAQoB,EAAKE,GAAG,eAAetB,GAAQ5B,EAAwE,EAAEoD,iBAAiBrC,SAG90Bf,EAAwE,EAAEqD,oBAE1ErD,EAAwE,EAAEoD,mBAIxE,CAAC,CAAC,EAAE,EAAE"},"input":"(this[\"webpackJsonpstreamlit_folium\"] = this[\"webpackJsonpstreamlit_folium\"] || []).push([[0],{\n\n/***/ 6:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5);\nvar map=null;/**\n * The component's render function. This will be called immediately after\n * the component is initially loaded, and then again every time the\n * component gets new data from Python.\n */function onRender(event){// Get the RenderData from the event\nvar data=event.detail;//console.log(data.args)\nvar fig=data.args[\"fig\"];var height=data.args[\"height\"];var width=data.args[\"width\"];function onMapClick(e){var global_data=__GLOBAL_DATA__;global_data.lat_lng_clicked=e.latlng;debouncedUpdateComponentValue();}var debouncedUpdateComponentValue=Object(underscore__WEBPACK_IMPORTED_MODULE_1__[/* debounce */ \"a\"])(updateComponentValue,250);function updateComponentValue(){var global_data=__GLOBAL_DATA__;var map=global_data.map;var bounds=map.getBounds();var zoom=map.getZoom();streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__[/* Streamlit */ \"a\"].setComponentValue({last_clicked:global_data.lat_lng_clicked,last_object_clicked:global_data.last_object_clicked,all_drawings:global_data.all_drawings,last_active_drawing:global_data.last_active_drawing,bounds:bounds,zoom:zoom});}function onMapMove(e){debouncedUpdateComponentValue();}function onDraw(e){return onLayerClick(e);}function onLayerClick(e){var global_data=__GLOBAL_DATA__;global_data.last_object_clicked=e.latlng;// if (e.layer && e.layer.toGeoJSON) {\n//   global_data.last_active_drawing = e.layer.toGeoJSON();\n// }\n// let details: Array<any> = global_data.drawnItems.toGeoJSON().features;\n// global_data.all_drawings = details;\ndebouncedUpdateComponentValue();}if(map==null){try{map=__GLOBAL_DATA__.map;}catch(e){// Only run this if the map hasn't already been created (and thus the global\n//data hasn't been initialized)\nvar map_div=document.getElementById(\"map_div\");var map_div2=document.getElementById(\"map_div2\");if(map_div2){map_div2.style.height=\"\".concat(height,\"px\");map_div2.style.width=\"\".concat(width,\"px\");}if(map_div){map_div.style.height=\"\".concat(height,\"px\");map_div.style.width=\"\".concat(width,\"px\");if(fig.indexOf(\"document.getElementById('export')\")!==-1){var a=document.createElement(\"a\");a.href=\"#\";a.id=\"export\";a.innerHTML=\"Export\";document.body.appendChild(a);}var render_script=document.createElement(\"script\");// HACK -- update the folium-generated JS to add, most importantly,\n// the map to this global variable so that it can be used elsewhere\n// in the script.\nvar set_global_data=\"\\n          window.__GLOBAL_DATA__ = {\\n            map: map_div,\\n            bounds: map_div.getBounds(),\\n            lat_lng_clicked: null,\\n            last_object_clicked: null,\\n            all_drawings: null,\\n            last_active_drawing: null,\\n            zoom: null,\\n            drawnItems: drawnItems,\\n        };\";var replaced=fig+set_global_data;render_script.innerHTML=replaced;document.body.appendChild(render_script);var global_data=__GLOBAL_DATA__;var _map=global_data.map;_map.on('click',onMapClick);_map.on('moveend',onMapMove);for(var key in _map._layers){var layer=_map._layers[key];layer.on(\"click\",onLayerClick);}_map.on('draw:created',onDraw);_map.on('draw:edited',onDraw);_map.on('draw:deleted',onDraw);streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__[/* Streamlit */ \"a\"].setFrameHeight();updateComponentValue();}}}}// Attach our `onRender` handler to Streamlit's render event.\nstreamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__[/* Streamlit */ \"a\"].events.addEventListener(streamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__[/* Streamlit */ \"a\"].RENDER_EVENT,onRender);// Tell Streamlit we're ready to start receiving data. We won't get our\n// first RENDER_EVENT until we call this function.\nstreamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__[/* Streamlit */ \"a\"].setComponentReady();// Finally, tell Streamlit to update our initial height. We omit the\n// `height` parameter here to have it default to our scrollHeight.\nstreamlit_component_lib__WEBPACK_IMPORTED_MODULE_0__[/* Streamlit */ \"a\"].setFrameHeight();\n\n/***/ })\n\n},[[6,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/joelslee/Desktop/newfolium/streamlit-folium/streamlit_folium/frontend/src/index.tsx"],"names":["map","onRender","event","data","detail","fig","args","height","width","onMapClick","e","global_data","__GLOBAL_DATA__","lat_lng_clicked","latlng","debouncedUpdateComponentValue","debounce","updateComponentValue","bounds","getBounds","zoom","getZoom","Streamlit","setComponentValue","last_clicked","last_object_clicked","all_drawings","last_active_drawing","onMapMove","onDraw","onLayerClick","map_div","document","getElementById","map_div2","style","indexOf","a","createElement","href","id","innerHTML","body","appendChild","render_script","set_global_data","replaced","on","key","_layers","layer","setFrameHeight","events","addEventListener","RENDER_EVENT","setComponentReady"],"mappings":"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","file":"x","sourcesContent":["import { Streamlit, RenderData } from \"streamlit-component-lib\"\nimport { debounce } from \"underscore\";\n\nlet map: any = null;\n\ntype GlobalData = {\n  map: any;\n  lat_lng_clicked: any;\n  last_object_clicked: any;\n  last_active_drawing: any,\n  all_drawings: any,\n  bounds: any;\n  zoom: any;\n  drawnItems: any;\n};\n\ndeclare var __GLOBAL_DATA__: GlobalData;\n\n/**\n * The component's render function. This will be called immediately after\n * the component is initially loaded, and then again every time the\n * component gets new data from Python.\n */\nfunction onRender(event: Event): void {\n  // Get the RenderData from the event\n  const data = (event as CustomEvent<RenderData>).detail\n\n  //console.log(data.args)\n  const fig: string = data.args[\"fig\"];\n  const height: number = data.args[\"height\"];\n  const width: number = data.args[\"width\"];\n\n  function onMapClick(e: any) {\n    const global_data = __GLOBAL_DATA__;\n    global_data.lat_lng_clicked = e.latlng;\n    debouncedUpdateComponentValue()\n  }\n\n  let debouncedUpdateComponentValue = debounce(updateComponentValue, 250)\n\n  function updateComponentValue() {\n    const global_data = __GLOBAL_DATA__;\n    let map = global_data.map;\n    let bounds = map.getBounds();\n    let zoom = map.getZoom();\n    Streamlit.setComponentValue({\n      last_clicked: global_data.lat_lng_clicked,\n      last_object_clicked: global_data.last_object_clicked,\n      all_drawings: global_data.all_drawings,\n      last_active_drawing: global_data.last_active_drawing,\n      bounds: bounds,\n      zoom: zoom,\n    })\n  }\n\n  function onMapMove(e: any) {\n    debouncedUpdateComponentValue()\n  }\n\n  function onDraw(e: any) {\n    return onLayerClick(e);\n  }\n\n  function onLayerClick(e: any) {\n    const global_data = __GLOBAL_DATA__;\n    global_data.last_object_clicked = e.latlng;\n    // if (e.layer && e.layer.toGeoJSON) {\n    //   global_data.last_active_drawing = e.layer.toGeoJSON();\n    // }\n    // let details: Array<any> = global_data.drawnItems.toGeoJSON().features;\n    // global_data.all_drawings = details;\n    debouncedUpdateComponentValue()\n  }\n\n  if (map == null) {\n    try {\n      map = __GLOBAL_DATA__.map;\n    } catch (e) {\n      // Only run this if the map hasn't already been created (and thus the global\n      //data hasn't been initialized)\n      const map_div = document.getElementById(\"map_div\");\n      const map_div2 = document.getElementById(\"map_div2\");\n      if (map_div2) {\n        map_div2.style.height = `${height}px`\n        map_div2.style.width = `${width}px`\n      }\n      if (map_div) {\n        map_div.style.height = `${height}px`\n        map_div.style.width = `${width}px`\n\n        if (fig.indexOf(\"document.getElementById('export')\") !== -1) {\n          let a = document.createElement(\"a\");\n          a.href = \"#\";\n          a.id = \"export\";\n          a.innerHTML = \"Export\";\n          document.body.appendChild(a);\n        }\n\n        const render_script = document.createElement(\"script\")\n        // HACK -- update the folium-generated JS to add, most importantly,\n        // the map to this global variable so that it can be used elsewhere\n        // in the script.\n        let set_global_data = `\n          window.__GLOBAL_DATA__ = {\n            map: map_div,\n            bounds: map_div.getBounds(),\n            lat_lng_clicked: null,\n            last_object_clicked: null,\n            all_drawings: null,\n            last_active_drawing: null,\n            zoom: null,\n            drawnItems: drawnItems,\n        };`;\n        let replaced = fig + set_global_data;\n        render_script.innerHTML = replaced;\n        document.body.appendChild(render_script);\n\n        const global_data = __GLOBAL_DATA__;\n        let map = global_data.map;\n\n        map.on('click', onMapClick);\n        map.on('moveend', onMapMove);\n        for (let key in map._layers) {\n          let layer = map._layers[key];\n          layer.on(\"click\", onLayerClick)\n        }\n        map.on('draw:created', onDraw);\n        map.on('draw:edited', onDraw);\n        map.on('draw:deleted', onDraw);\n\n        Streamlit.setFrameHeight()\n        updateComponentValue();\n      }\n    }\n  }\n}\n\n// Attach our `onRender` handler to Streamlit's render event.\nStreamlit.events.addEventListener(Streamlit.RENDER_EVENT, onRender)\n\n// Tell Streamlit we're ready to start receiving data. We won't get our\n// first RENDER_EVENT until we call this function.\nStreamlit.setComponentReady()\n\n// Finally, tell Streamlit to update our initial height. We omit the\n// `height` parameter here to have it default to our scrollHeight.\nStreamlit.setFrameHeight()"]}}